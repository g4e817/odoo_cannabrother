<odoo>
    <data>
        <!--
                <template id="listing">
                  <ul>
                    <li t-foreach="objects" t-as="object">
                      <a t-attf-href="#{ root }/objects/#{ object.id }">
                        <t t-esc="object.display_name"/>
                      </a>
                    </li>
                  </ul>
                </template>
                <template id="object">
                  <h1><t t-esc="object.display_name"/></h1>
                  <dl>
                    <t t-foreach="object._fields" t-as="field">
                      <dt><t t-esc="field"/></dt>
                      <dd><t t-esc="object[field]"/></dd>
                    </t>
                  </dl>
                </template>
        -->

        <record id="view_eori_number_res_partner" model="ir.ui.view">
            <field name="inherit_id" ref="base.view_partner_form"/>
            <field name="model">res.partner</field>
            <field name="arch" type="xml">
                <field name="vat" position="after">
                    <field name="eori_nr"/>
                </field>
            </field>
        </record>

        <record id="view_picking_post_label_form_view" model="ir.ui.view">
            <field name="inherit_id" ref="stock.view_picking_form"/>
            <field name="model">stock.picking</field>
            <field name="arch" type="xml">

                <field name="scheduled_date" position="before">
                    <field name="shipper_url" style="color:green !important;" widget="url" readonly="1" text="Tracking Url anzeigen"
                           attrs="{'invisible' : [('has_post_label', '!=', True)]}"/>
                    <field name="has_post_label"
                           invisible="1"/><!--attrs="{'invisible' : [('has_post_label', '!=', True)]}"/>-->

                    <field name="assignee_user" attrs="{'invisible' : [('assignee_status', '==', 'open')]}"/>
                </field>
                <xpath expr="//field[@name='state']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>


                <button name="do_unreserve" position="attributes">
                    <attribute name="invisible">1</attribute>
                </button>

                <button name="button_scrap" position="attributes">
                    <attribute name="invisible">1</attribute>
                </button>

                <!--<field name="picking_type_id" position="after">
                    <field name="job_status"/>
                    <field name="queue_job_id"/>
                </field>-->

                <header>
                    <field name="assignee_status" widget="statusbar" statusbar_visible="open,in_work,order_packed"
                           statusbar_colors='{"open":"yellow","in_work":"green", "order_packed": "grey"}'/>
                </header>


                <button name="action_cancel" position="after">

                    <button name="action_done" string="Erneut senden" type="object"/>
                    <button name="action_assign_user" string="Mir zuweisen"
                            groups="base.group_user" type="object"
                            attrs="{'invisible' : ['|', ('picking_type_code', '!=', 'outgoing'), ('assignee_status', '!=', 'open')]}"/>

                    <button name="action_post_label" string="Label generieren"
                            groups="base.group_user" type="object"
                            attrs="{'invisible' : ['|', '|', '|', '|', ('assignee_status', '==', 'open'),  ('state', '!=', 'assigned'),  ('picking_type_code', '!=', 'outgoing'), 
                            ('has_post_label', '=', True), ('carrier_id', '=', 7)]}"/>

                    <button name="action_cancel_shipment" string="Label lÃ¶schen"
                            groups="base.group_user" type="object"
                            attrs="{'invisible' : ['|', '|', ('state', 'not in', ('assigned', 'done')),  ('picking_type_code', '!=', 'outgoing'), ('has_post_label', '!=', True)]}"/>

                    <button name="action_print_post_label" string="Label drucken"
                            groups="base.group_user" type="object"
                            attrs="{'invisible' : ['|',  '|', ('state', '!=', 'assigned'), ('picking_type_code', '!=', 'outgoing'), ('has_post_label', '!=', True)]}"/>

                </button>

                <page name="note" position="after">
                    <page name="collo_codes_page" string="Collo Codes"
                          attrs="{'invisible' : [('has_post_label', '!=', True)]}">
                        <field name="collo_codes" widget="one2many_list">
                            <tree string="Collo Codes">
                                <field name="code"/>
                                <field name="number_type"/>
                                <field name="ou_carrier_third_party"/>
                            </tree>
                        </field>
                    </page>
                </page>
            </field>
        </record>

        <record id="postlabel_view_order_form" model="ir.ui.view">

            <field name="inherit_id" ref="sale.view_order_form"/>
            <field name="model">sale.order</field>
            <field name="arch" type="xml">


                <xpath expr="//field[@name='payment_term_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>

                <field name="client_order_ref" position="after">
                    <field name="payment_term_id"/>
                </field>

                <xpath expr="//field[@name='validity_date']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>

                <xpath expr="//field[@name='date_order']" position="attributes">
                    <attribute name="required">0</attribute>
                    <attribute name="invisible">1</attribute>
                </xpath>

                <!--<field name="state" widget="statusbar" statusbar_visible="draft,confirmed,partially_available,assigned,done"/>-->

            </field>
        </record>

        <record id="postlabel_view_order_tree" model="ir.ui.view">

            <field name="inherit_id" ref="sale.view_order_tree"/>
            <field name="name">sale.order.post_label.tree</field>
            <field name="model">sale.order</field>
            <field name="arch" type="xml">

                <xpath expr="//field[@name='date_order']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>


            </field>
        </record>


        <record id="postlabel_stock_picking_type_kanban" model="ir.ui.view">
            <field name="inherit_id" ref="stock.stock_picking_type_kanban"/>
            <field name="model">stock.picking.type</field>

            <field name="arch" type="xml">
                <xpath expr="//field[@name='warehouse_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
            </field>
        </record>

        <record id="vpick_assignee_tree" model="ir.ui.view">
            <field name="inherit_id" ref="stock.vpicktree"/>
            <field name="name">stock.picking.assignee.tree</field>
            <field name="model">stock.picking</field>

            <field name="arch" type="xml">

                <xpath expr="//tree" position="attributes">
                    <attribute name="decoration-muted">assignee_status=='order_packed'</attribute>
                    <attribute name="decoration-success">assignee_status=='in_work'</attribute>
                </xpath>

                <xpath expr="//field[@name='state']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>

                <xpath expr="//field[@name='company_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>


                <field name="name" position="after">
                    <field name="assignee_status" invisible="1"/>
                    <field name="current_user"/>
                </field>

            </field>
        </record>

        <!--<record model="ir.actions.server" id="stock_picking_performendofday_action">
            <field name="name">Tagesabschluss generieren</field>
            <field name="model_id" ref="model_stock_picking"/>
            <field name="type">ir.actions.server</field>
            <field name="state">code</field>
            <field name="code">records.perform_end_of_day()</field>
        </record>-->

        <record id="stock_picking_performendofday_action" model="ir.actions.act_window">
            <field name="name">Tagesabschluss generieren</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">stock.picking.performendofday</field>
            <field name="view_id" ref="postlabel.view_performendofday_post_label"/>
            <field name="view_mode">form</field>
            <field name="target">new</field>
        </record>

        <menuitem action="stock_picking_performendofday_action" id="menu_performendofday_stock_picking_form" parent="stock.menu_stock_warehouse_mgmt" sequence="33"/>

        <record id="stock_perform_end_of_day_view_tree" model="ir.ui.view">
            <field name="name">stock.perform.end.of.day.tree</field>
            <field name="model">stock.perform.end.of.day</field>
            <field name="arch" type="xml">
                <tree>
                <field name="name" />
                <field name="creation_date"/>
                <field name="pdf_file" widget='file' />
                </tree>
            </field>
        </record>

      <record model="ir.ui.view" id="stock_perform_end_of_day_view_form">
        <field name="name">stock.perform.end.of.day.form</field>
        <field name="model">stock.perform.end.of.day</field>
        <field name="arch" type="xml">
            <form string="TagesabschlÃ¼sse">
                
                <sheet>
                    <group>
                        <group >
                            
                            <field name="name" />
                            <field name="creation_date" />
                            <field name="file_name" invisible="1"/>
                            <field name="pdf_file" widget="pdf_viewer" filename="file_name"/>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>


     <record id="action_performendofday" model="ir.actions.act_window">
        <field name="name">TagesabschlÃ¼sse einsehen</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">stock.perform.end.of.day</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="stock_perform_end_of_day_view_tree"/>
    </record>

        <menuitem action="action_performendofday" id="menu_performendofday_tree_view" parent="stock.menu_warehouse_report" sequence="151"/>

    <record id="postlabel_config_settings_view_form" model="ir.ui.view">
            <field name="inherit_id" ref="stock.res_config_settings_view_form"/>
            <field name="model">res.config.settings</field>
            <field name="arch" type="xml">
                <xpath expr="//h2[@id='schedule_info']" position="before">
                    <h2>Postlabel</h2>
                     <div class="row mt16 o_settings_container">
                        <div class="col-12 col-lg-6 o_setting_box">
                            <label for="post_wsdl_url" string="WSDL Url"/>
                            <div class="text-muted">
                                Stelle eine WSDL Url von der Post ein (e.g. https://plc.post.at/Post.Webservice/ShippingService.svc?WSDL)
                            </div>
                            <field name="post_wsdl_url"/>
                        </div>
                        <div class="col-12 col-lg-6 o_setting_box">
                            <label for="post_client_id" string="Post Client ID"/>
                            <div class="text-muted">
                                Stelle eine Post Client ID ein
                            </div>
                            <field name="post_client_id"/>
                        </div>

                        <div class="col-12 col-lg-6 o_setting_box">
                            <label for="post_org_unit_id" string="Post Org Unit ID"/>
                            <div class="text-muted">
                                Stelle eine Post Org Unit ID ein
                            </div>
                            <field name="post_org_unit_id"/>
                        </div>

                         <div class="col-12 col-lg-6 o_setting_box">
                            <label for="post_org_unit_guid" string="Post Org Unit GUID"/>
                            <div class="text-muted">
                                Stelle eine Post Org Unit GUID ein
                            </div>
                            <field name="post_org_unit_guid"/>
                        </div>
                    </div>
                </xpath>
            </field>
    </record>
    </data>
</odoo>
